<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <title>Video Test</title>
        <link rel="stylesheet" href="https://cdn.plyr.io/3.6.4/plyr.css" />
        <link rel="preconnect" href="https://fonts.gstatic.com">
        <link href="https://fonts.googleapis.com/css2?family=PT+Sans:wght@400;700&display=swap" rel="stylesheet">
        <script src="https://cdn.plyr.io/3.6.4/plyr.polyfilled.js"></script>
        <style>
            .container {
                margin: 20px auto;
                width: 600px;
            }
            video {
                width: 100%;
            }
        </style>
    <body>
        <div class="container">
            <video controls crossorigin playsinline></video>
        </div>
        <script src="https://cdn.rawgit.com/video-dev/hls.js/18bb552/dist/hls.min.js"></script>
        <script>
            document.addEventListener('DOMContentLoaded', () => {
                const source = 'https://cdn.samyofox.ninja/streamtest/video.m3u8';
                const video = document.querySelector('video');
                
                // For more options see: https://github.com/sampotts/plyr/#options
                // captions.update is required for captions to work with hls.js
                const player = new Plyr(video, {captions: {active: true, update: true, language: 'en'}});
                
                if (!Hls.isSupported()) {
                    video.src = source;
                } else {
                    // For more Hls.js options, see https://github.com/dailymotion/hls.js
                    const hls = new Hls();
                    hls.loadSource(source);
                    hls.attachMedia(video);
                    window.hls = hls;
                    
                    // Handle changing captions
                    player.on('languagechange', () => {
                        // Caption support is still flaky. See: https://github.com/sampotts/plyr/issues/994
                        setTimeout(() => hls.subtitleTrack = player.currentTrack, 50);
                    });
                }
                
                // Expose player so it can be used from the console
                window.player = player;
            });
        </script>
    </body>
</html>
